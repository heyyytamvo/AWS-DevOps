FROM node:20-alpine3.20

WORKDIR /home/app

COPY . /home/app


ARG BUILDTIME_DB_DATABASE=default
ARG BUILDTIME_DB_HOST=default
ARG BUILDTIME_DB_PORT=default
ARG BUILDTIME_DB_USERNAME=default
ARG BUILDTIME_DB_PASSWORD=default

ENV DB_DATABASE=$BUILDTIME_DB_DATABASE
ENV DB_HOST=$BUILDTIME_DB_HOST
ENV DB_PORT=$BUILDTIME_DB_PORT
ENV DB_USERNAME=$BUILDTIME_DB_USERNAME
ENV DB_PASSWORD=$BUILDTIME_DB_PASSWORD


# RUN npm install
RUN npm run build

EXPOSE 3001

CMD ["npm", "run", "start"]